(main) root@C.24743688:/workspace$ cat /etc/Caddyfile 
{
}

(noauth_matcher) {
        @noauth {
                path /.well-known/acme-challenge/*
                path /.well-known/change-password
                path /manifest.json
                path /manifest.webmanifest
                path /site.webmanifest
                path /.well-known/security.txt
                path /security.txt
                path /health.ico
        }
}

(healthicon) {
        route /health.ico {
                header Content-Type image/x-icon
                header Access-Control-Allow-Origin *
                header Access-Control-Allow-Methods GET, OPTIONS
                header Access-Control-Allow-Headers *
                respond 200 {
                        body "GIF89a\\x01\\x00\\x01\\x00\\x80\\x00\\x00\\xff\\xff\\xff\\x00\\x00\\x00!\\xf9\\x04\\x01\\x00\\x00\\x00\\x00,\\x00\\x00\\x00\\x00\\x01\\x00\\x01\\x00\\x00\\x02\\x02D\\x01\\x00;"
                }
        }
}

(real_ip_map) {
        map {http.request.header.cf-connecting-ip} {real_ip} {
                "" {remote_host}
                default {http.request.header.cf-connecting-ip}
        }
}

(forwarded_protocol_map) {
        map {http.request.header.cf-visitor} {forwarded_protocol} {
                "" {scheme}
                default https
        }
}

(token_auth_matcher) {
        @token_auth {
                query token=cebac59551dbebae3dc6a01181642dbc8612565ca14dd8c622e1abfa78b59bf5
        }
}

(has_valid_auth_cookie_matcher) {
        @has_valid_auth_cookie {
                header_regexp Cookie C.24743688_auth_token=cebac59551dbebae3dc6a01181642dbc8612565ca14dd8c622e1abfa78b59bf5
        }
}

(has_valid_bearer_token_matcher) {
        @has_valid_bearer_token {
                header Authorization "Bearer cebac59551dbebae3dc6a01181642dbc8612565ca14dd8c622e1abfa78b59bf5"
        }
}
:1111 {
        root * /opt/portal-aio/caddy_manager/public

        handle_errors 502 {
                rewrite * /502.html
                file_server
        }

        import noauth_matcher
        import real_ip_map
        import forwarded_protocol_map

        route @noauth {
                import healthicon

                handle {
                        reverse_proxy localhost:11111 {
                                header_up Host {upstream_hostport}
                                header_up X-Forwarded-Proto {forwarded_protocol}
                                header_up X-Real-IP {real_ip}
                        }
                }
        }

        import token_auth_matcher
        import has_valid_auth_cookie_matcher
        import has_valid_bearer_token_matcher

        route @token_auth {
                header Set-Cookie "C.24743688_auth_token=cebac59551dbebae3dc6a01181642dbc8612565ca14dd8c622e1abfa78b59bf5; Path=/; Max-Age=604800; HttpOnly; SameSite=lax"
                uri query -token
                redir * {uri} 302
        }

        route @has_valid_auth_cookie {
                handle {
                        reverse_proxy localhost:11111 {
                                header_up Host {upstream_hostport}
                                header_up X-Forwarded-Proto {forwarded_protocol}
                                header_up X-Real-IP {real_ip}
                        }
                }
        }

        route @has_valid_bearer_token {
                handle {
                        reverse_proxy localhost:11111 {
                                header_up Host {upstream_hostport}
                                header_up X-Forwarded-Proto {forwarded_protocol}
                                header_up X-Real-IP {real_ip}
                        }
                }
        }

        route {
                basic_auth {
                        vastai "$2a$14$I0MrVw2dMPrqck.tojoueuE0BLsxfaX3VunOzNHD2ICBc2t061PsW"
                }
                header Set-Cookie "C.24743688_auth_token=cebac59551dbebae3dc6a01181642dbc8612565ca14dd8c622e1abfa78b59bf5; Path=/; Max-Age=604800; HttpOnly; SameSite=lax"

                handle {
                        reverse_proxy localhost:11111 {
                                header_up Host {upstream_hostport}
                                header_up X-Forwarded-Proto {forwarded_protocol}
                                header_up X-Real-IP {real_ip}
                        }
                }
        }
}

:7500 {
        root * /opt/portal-aio/caddy_manager/public

        handle_errors 502 {
                rewrite * /502.html
                file_server
        }

        import real_ip_map
        import forwarded_protocol_map

        handle {
                reverse_proxy localhost:17500 {
                        header_up Host {upstream_hostport}
                        header_up X-Forwarded-Proto {forwarded_protocol}
                        header_up X-Real-IP {real_ip}
                }
        }
}

:11434 {
        root * /opt/portal-aio/caddy_manager/public

        handle_errors 502 {
                rewrite * /502.html
                file_server
        }

        import noauth_matcher
        import real_ip_map
        import forwarded_protocol_map

        route @noauth {
                import healthicon

                handle {
                        reverse_proxy localhost:21434 {
                                header_up Host {upstream_hostport}
                                header_up X-Forwarded-Proto {forwarded_protocol}
                                header_up X-Real-IP {real_ip}
                        }
                }
        }

        import token_auth_matcher
        import has_valid_auth_cookie_matcher
        import has_valid_bearer_token_matcher

        route @token_auth {
                header Set-Cookie "C.24743688_auth_token=cebac59551dbebae3dc6a01181642dbc8612565ca14dd8c622e1abfa78b59bf5; Path=/; Max-Age=604800; HttpOnly; SameSite=lax"
                uri query -token
                redir * {uri} 302
        }

        route @has_valid_auth_cookie {
                handle {
                        reverse_proxy localhost:21434 {
                                header_up Host {upstream_hostport}
                                header_up X-Forwarded-Proto {forwarded_protocol}
                                header_up X-Real-IP {real_ip}
                        }
                }
        }

        route @has_valid_bearer_token {
                handle {
                        reverse_proxy localhost:21434 {
                                header_up Host {upstream_hostport}
                                header_up X-Forwarded-Proto {forwarded_protocol}
                                header_up X-Real-IP {real_ip}
                        }
                }
        }

        route {
                basic_auth {
                        vastai "$2a$14$mKbZlHc4OtDszWU2XiexnuhSU.TxKRBiT7ZqJ26wmhtxv864XxJ/S"
                }
                header Set-Cookie "C.24743688_auth_token=cebac59551dbebae3dc6a01181642dbc8612565ca14dd8c622e1abfa78b59bf5; Path=/; Max-Age=604800; HttpOnly; SameSite=lax"

                handle {
                        reverse_proxy localhost:21434 {
                                header_up Host {upstream_hostport}
                                header_up X-Forwarded-Proto {forwarded_protocol}
                                header_up X-Real-IP {real_ip}
                        }
                }
        }
}

:8384 {
        root * /opt/portal-aio/caddy_manager/public

        handle_errors 502 {
                rewrite * /502.html
                file_server
        }

        import noauth_matcher
        import real_ip_map
        import forwarded_protocol_map

        route @noauth {
                import healthicon

                handle {
                        reverse_proxy localhost:18384 {
                                header_up Host {upstream_hostport}
                                header_up X-Forwarded-Proto {forwarded_protocol}
                                header_up X-Real-IP {real_ip}
                        }
                }
        }

        import token_auth_matcher
        import has_valid_auth_cookie_matcher
        import has_valid_bearer_token_matcher

        route @token_auth {
                header Set-Cookie "C.24743688_auth_token=cebac59551dbebae3dc6a01181642dbc8612565ca14dd8c622e1abfa78b59bf5; Path=/; Max-Age=604800; HttpOnly; SameSite=lax"
                uri query -token
                redir * {uri} 302
        }

        route @has_valid_auth_cookie {
                handle {
                        reverse_proxy localhost:18384 {
                                header_up Host {upstream_hostport}
                                header_up X-Forwarded-Proto {forwarded_protocol}
                                header_up X-Real-IP {real_ip}
                        }
                }
        }

        route @has_valid_bearer_token {
                handle {
                        reverse_proxy localhost:18384 {
                                header_up Host {upstream_hostport}
                                header_up X-Forwarded-Proto {forwarded_protocol}
                                header_up X-Real-IP {real_ip}
                        }
                }
        }

        route {
                basic_auth {
                        vastai "$2a$14$65s1NcAtXxjFk5EEKnVGWeuYfYkKinZ03nqGMPBqtbrFQjTMQzx.6"
                }
                header Set-Cookie "C.24743688_auth_token=cebac59551dbebae3dc6a01181642dbc8612565ca14dd8c622e1abfa78b59bf5; Path=/; Max-Age=604800; HttpOnly; SameSite=lax"

                handle {
                        reverse_proxy localhost:18384 {
                                header_up Host {upstream_hostport}
                                header_up X-Forwarded-Proto {forwarded_protocol}
                                header_up X-Real-IP {real_ip}
                        }
                }
        }
}
(main) root@C.24743688:/workspace$ ollama run gpt-oss:20b
pulling manifest 
Error: pull model manifest: 412: 

The model you are attempting to pull requires a newer version of Ollama.

Please download the latest version at:

        https://ollama.com/download
